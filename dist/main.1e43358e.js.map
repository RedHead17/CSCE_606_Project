{"version":3,"sources":["src/Math.js","src/Items.js","src/Player.js","src/Enemies.js","src/EntityMan.js","src/BulletMan.js","src/TitleScreen.js","src/main.js","C:/Users/maryj/AppData/Roaming/npm/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["TossCoin","prob","Math","random","getRandom","min","max","GetRandomVec2","xMin","xMax","yMin","yMax","x","y","Items","CHAIN","SHOTGUN","SLINGSHOT","ItemIcons","ItemSound","ItemMan","scene","items","add","group","classType","Item","maxSize","runChildUpdate","removeCallback","item","lights","removeLight","glow","physics","overlap","EntityMan","player","getItem","type","loc","i","get","setPipeline","addLight","Player","SetWeapon","destroy","texture","setDepth","setScale","world","enable","existing","Phaser","GameObjects","Sprite","GameObjectFactory","register","cc","displayList","updateList","r","circBody","make","graphics","fillStyle","fillCircle","generateTexture","circArm","strokeCircle","a1","sprite","a2","body","setCollideWorldBounds","setCircle","sys","game","device","os","desktop","input","addPointer","j1","plugins","cameras","main","displayHeight","radius","cursorKeys","createCursorKeys","pressedKeys","keyboard","on","keyup","mousedown","mouseup","keys","addKeys","W","Input","Keyboard","KeyCodes","A","S","D","UP","DOWN","LEFT","RIGHT","particles","createEmitter","angle","speed","quantity","lifespan","alpha","start","end","scale","rotate","ease","gravityY","weapon","light","setMaxVelocity","shoot","ammo","score","cooldown","lives","time","deltaTime","keydown","dt","pc","center","Angle","Between","mousePointer","worldX","worldY","pointer","pointerX","pointer1","pointer2","is_dir","abs","outPos","getRightCenter","dir","offset","Geom","Point","Rotate","rotation","shake","cos","sin","sound","play","BulletMan","addBullet","Bullets","events","emit","dir1","sign","setPosition","RotateTo","setFlipY","isDown","left","right","up","down","keyCode","velocity","maxVelocity","e","weaponType","alive","enemy","emitParticleAt","moves","off","pointerdown","setIntensity","time_ms","gm","tweens","targets","volume","duration","onComplete","fadeOut","to","delay","pl1","Enemies","Object","freeze","GREEN","RED","BLUE","Enemy","displayWidth","target","c","getCenter","tc","setRotation","Reverse","t","updateRotation","velocityFromRotation","v","hp","floor","timer","acceleration","ct","width","height","x1","y1","worldView","contains","setVelocity","num","bound_x","bounds","bound_y","centerX","centerY","setOrigin","enemies","addItem","RandomItem","SpawnEnemy","DoDamage","nextScoreEvent","prevEnemyCount","countActive","update","nextEvent","score2win","spawnloc","SpawnLoc","setTarget","bullets","Bullet","doDamage","b","score_fade","scoreText","text","setFontSize","setFontFamily","scaleX","checkWorldBounds","ImageButton","callback","setInteractive","useHandCursor","enterButtonHoverState","enterButtonRestState","enterButtonActiveState","delta","setTint","clearTint","Image","cb","UserInterface","config","key","data","fontFamily","fontSize","fill","gameText","ammoText","livesText","ourGame","value","setText","toFixed","sendToBack","restart","sleep","Scene","TitleScreen","load","image","url","w","canvas","h","ts","setDisplaySize","logo","help","pb","ImgButton","switch","Credits","cs","mb","SCALE","WIDTH","HEIGHT","clientWidth","document","documentElement","clientHeight","Game","progressBar","progressBox","fillRect","loadingText","style","font","percentText","assetText","parseInt","clear","file","setDefaultCursor","loading_screen","normalMap","audio","plugin","shader","Display","BaseShader","cache","setRenderToTexture","setBounds","setAmbientColor","heart_light","hlt","repeat","yoyo","timeScale","music","rate","Init","loop","once","Cameras","Scene2D","Events","FADE_OUT_COMPLETE","cam","effect","delayedCall","fadeIn","win","children","each","child","launch","bringToTop","startFollow","wp","getWorldPoint","Update","GameOver","logo_id","mm","mainMenu","rs","playAgain","scoreTxt","stop","remove","myCustomCanvas","createElement","appendChild","myCustomContext","getContext","getExtension","gameConfig","WEBGL","context","maxLights","roundPixels","mode","Scale","FIT","default","arcade","gravity","debug","debugShowBody","debugShowVelocity","isMobile","createEvent","window","addEventListener","resize","querySelector","windowWidth","innerWidth","windowHeight","innerHeight","windowRatio","gameRatio","alert","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","hmrApply","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","getElementById","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","length","concat","Function","deps","cached","some"],"mappings":"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","file":"main.1e43358e.js","sourceRoot":"..","sourcesContent":["\nexport function TossCoin(prob) {\n\treturn (Math.random() < prob);\n}\nexport function getRandom(min, max) {\n  return Math.random() * (max - min) + min;\n}\n\nexport function GetRandomVec2(xMin, xMax, yMin, yMax) {\n\treturn { x: getRandom(xMin, xMax), y: getRandom(yMin, yMax) };\n}","import { EntityMan } from \"./EntityMan.js\";\nimport { TossCoin } from './Math.js';\n\nexport const Items  = {\n    CHAIN  : 'chain',\n    SHOTGUN  : 'shotgun',\n    SLINGSHOT  : 'slingshot'\n};\nexport const ItemIcons  = {\n    CHAIN  : 'chainicon',\n    SHOTGUN  : 'shotgunicon',\n    SLINGSHOT: 'slingshoticon'\n};\nexport const ItemSound = {\n    CHAIN  : 'shoot_pop',\n    SHOTGUN  : 'shoot_bang',\n    SLINGSHOT: 'shoot_twang'\n};\n\n\n\nexport class ItemMan { \n    \n    static items;  // ground Items\n    static scene;\n    \n    static Init(scene) { \n        ItemMan.scene = scene;\n        ItemMan.items = scene.add.group({\n            classType: Item,\n            maxSize: 4,\n            runChildUpdate: true,\n            removeCallback: function(item) {\n                ItemMan.scene.lights.removeLight(item.glow);\n            }\n        });\n        scene.physics.add.overlap(ItemMan.items, EntityMan.player, getItem);\n    }\n    \n    \n    static Update() {}\n    \n    \n    static addItem(type, loc) {\n            let i = ItemMan.items.get(loc.x, loc.y, type);\n            if(i) {\n                i.setPipeline('Light2D');\n                i.glow = ItemMan.scene.lights.addLight(i.x, i.y, 200, 0xFF3333);\n            }\n\n    }\n      \n}\n\n\nfunction getItem(Item, Player) {\n    switch(Item.type) {\n        case ItemIcons.CHAIN:\n            Player.SetWeapon(Items.CHAIN, 200);\n            break;\n        case ItemIcons.SLINGSHOT:\n            Player.SetWeapon(Items.SLINGSHOT, -1);\n            break;\n        case ItemIcons.SHOTGUN:\n            Player.SetWeapon(Items.SHOTGUN, 15);\n            break;\n            // Change player texture\n    }\n    Item.destroy();\n}\n\n\n\n\n\n\n\nexport class Item extends Phaser.GameObjects.Sprite {\n    glow;\n    type;\n    constructor(scene, x, y, texture) {\n        super(scene, x, y, texture);\n\n        switch(texture) {\n            case ItemIcons.CHAIN:\n                this.setDepth(0.1);\n                this.setScale(0.6);\n                this.type = ItemIcons.CHAIN;\n                scene.physics.world.enable(this);\n                break;\n            case Items.CHAIN:\n                this.type = Items.CHAIN;\n                this.setScale(0.6);\n                break;\n            case Items.SLINGSHOT:\n                this.setScale(0.6);\n                this.type = Items.SLINGSHOT;\n                break;\n            case ItemIcons.SLINGSHOT:\n                this.setDepth(0.1);\n                this.setScale(0.6);\n                this.type = ItemIcons.SLINGSHOT;\n                scene.physics.world.enable(this);\n                break;\n            case Items.SHOTGUN:\n                this.setScale(1.5);\n                this.type = Items.SHOTGUN;\n                break;\n            case ItemIcons.SHOTGUN:\n                this.setDepth(0.1);\n                this.setScale(0.6);\n                this.type = ItemIcons.SHOTGUN;\n                scene.physics.world.enable(this);\n                break;\n                \n        }\n        scene.add.existing(this);\n        this.setDepth(0.2);\n    }\n    \n    \n    update() {}\n    \n    static RandomItem() {\n        return TossCoin(0.3) ? ItemIcons.CHAIN : ItemIcons.SHOTGUN;\n    }\n    \n    \n}\n\n\nPhaser.GameObjects.GameObjectFactory.register('item', function (x, y, texture) {\n\tconst cc = new Item(this.scene, x, y, texture);\n    this.displayList.add(cc);\n    this.updateList.add(cc);\n    return cc;\n});","import { BulletMan, Bullets, score_fade } from './BulletMan.js';\nimport { Items, ItemSound } from './Items.js';\n\n\nexport class Player extends Phaser.GameObjects.Sprite\n{\n    \n    a1; a2;\n    weapon; ammo\n    shoot;\n    keys;\n    \n    radius;\n    lives;\n    light;\n    particles;\n    \n    score;\n    cooldown;\n    \n    \n    constructor(scene, x, y, r) {\n        \n        let circBody = scene.make.graphics()\n            .fillStyle(0x6666ff)\n            .fillCircle(r, r, r)\n            .generateTexture('PlayerBody', r*2, r*2);\n        circBody.destroy();\n        \n        super(scene, x, y, 'PlayerBody');\n        \n        let circArm = scene.make.graphics()\n            .fillStyle(0x808080)\n            .fillCircle(r, r, r/4)\n            .strokeCircle(r,r,r/4)\n            .generateTexture('arm', r*2, r*2);\n        circArm.destroy();\n        this.setDepth(0.05);\n        this.a1 = scene.add.sprite(x+r, y, 'arm').setDepth(0.1);\n        this.a2 = scene.add.sprite(x, y+r, 'arm').setDepth(0.1);\n        //--------------------------\n        \n        scene.physics.world.enable(this);\n        this.body.setCollideWorldBounds(true);\n        scene.add.existing(this);\n        this.body.setCircle(r);\n        //--------------------------------------------------\n        if(!scene.sys.game.device.os.desktop) {\n            scene.input.addPointer(2);\n            this.j1 = scene.plugins.get('rexvirtualjoystickplugin').add(scene, {\n                    x: 150, y: scene.cameras.main.displayHeight-150,\n                    radius: 100,\n            });\n            this.cursorKeys = this.j1.createCursorKeys();\n            this.pressedKeys = [];\n        }\n        //--------------------------------------------------\n        \n        scene.input.keyboard.on(\"keyup\", this.keyup, this);\n        scene.input.on(\"pointerdown\", this.mousedown, this);\n        scene.input.on(\"pointerup\", this.mouseup, this);\n        this.keys = scene.input.keyboard.addKeys({ \n            W: Phaser.Input.Keyboard.KeyCodes.W, \n            A: Phaser.Input.Keyboard.KeyCodes.A, \n            S: Phaser.Input.Keyboard.KeyCodes.S, \n            D: Phaser.Input.Keyboard.KeyCodes.D, \n            UP: Phaser.Input.Keyboard.KeyCodes.UP,\n            DOWN: Phaser.Input.Keyboard.KeyCodes.DOWN,\n            LEFT: Phaser.Input.Keyboard.KeyCodes.LEFT,\n            RIGHT: Phaser.Input.Keyboard.KeyCodes.RIGHT\n            \n        });\n        \n        //--------------------------------------------------\n        \n        this.particles = scene.add.particles('playerfrag');\n        this.particles.createEmitter({\n            angle: { min: 240, max: 300 },\n            speed: { min: 400, max: 600 },\n            quantity: { min: 2, max: 10 },\n            lifespan: 4000,\n            alpha: { start: 1, end: 0 },\n            scale: { min: 0.05, max: 0.4 },\n            rotate: { start: 0, end: 360, ease: 'Back.easeOut' },\n            gravityY: 800,\n            on: false\n        });\n        \n        //--------------------------------------------------\n        \n        this.weapon = scene.add.item(x, y, Items.SLINGSHOT);\n        this.light = this.scene.lights.addLight(0, 0, 150);\n        this.angle = 0;\n        this.radius = r;\n        this.body.setMaxVelocity(200, 200);\n        this.shoot = false;\n        this.ammo = 0;\n        this.score = 0;\n        this.cooldown = 0;\n        this.lives = 4;\n    }\n\n    \n    preUpdate(time, deltaTime) {\n        super.preUpdate(time, deltaTime);\n        this.keydown();\n    }\n\n    \n    update(time, dt) {\n        const pc = this.body.center;\n        if(this.scene.sys.game.device.os.desktop) {\n            this.angle = Phaser.Math.Angle.Between(\n                pc.x, pc.y, \n                this.scene.input.mousePointer.worldX, this.scene.input.mousePointer.worldY\n            );\n        } else {\n            let pointer = (this.j1.pointerX == this.scene.input.pointer1.worldX) ? this.scene.input.pointer2 : this.scene.input.pointer1;\n            this.angle = Phaser.Math.Angle.Between(\n                pc.x, pc.y, \n                pointer.worldX, pointer.worldY\n            );\n        }\n        const is_dir = (Math.abs(this.angle) < 1.5708);    // Am i facing left or right?\n        \n        if(this.shoot) {\n            // messy fix this.\n            let outPos = this.weapon.getRightCenter();\n            const dir = is_dir ?  -1 : 1;\n            let offset = new Phaser.Geom.Point(20, 7*dir);\n            Phaser.Math.Rotate(offset, this.weapon.rotation);\n            outPos.y += offset.y;\n            outPos.x += offset.x;\n            \n            switch(this.weapon.type) {\n                case Items.CHAIN:\n                    this.scene.cameras.main.shake(500);     //shake(0.05, 500);\n                    this.body.x -= Math.cos(this.angle)*2;  // Push Player back\n                    this.body.y -= Math.sin(this.angle)*2;\n                    \n                    this.scene.sound.play(ItemSound.CHAIN);\n                    BulletMan.addBullet(Bullets.CHAIN, outPos, this.angle);\n                    // To do: spawn muzzle flash\n                    --this.ammo;\n                    this.scene.events.emit('ammoChange', this.ammo);\n                    if(this.ammo <= 0)\n                        this.SetWeapon(Items.SLINGSHOT, this.ammo);\n                    break;\n                case Items.SLINGSHOT:\n                    this.scene.sound.play(ItemSound.SLINGSHOT);\n                    BulletMan.addBullet(Bullets.SLINGSHOT, outPos, this.angle);\n                    this.shoot = false;\n                    break;\n                case Items.SHOTGUN: // lol get it\n                    if(this.cooldown > 0) {\n                        this.cooldown -= dt;\n                        break;\n                    } else this.cooldown = 83;\n                    this.scene.sound.play(ItemSound.SHOTGUN);\n                    let dir1 = Math.sign(this.angle);\n                    BulletMan.addBullet(Bullets.SHOTGUN, outPos, this.angle + dir1*0.10);\n                    BulletMan.addBullet(Bullets.SHOTGUN, outPos, this.angle + dir1*0.05);\n                    BulletMan.addBullet(Bullets.SHOTGUN, outPos, this.angle);\n                    BulletMan.addBullet(Bullets.SHOTGUN, outPos, this.angle + dir1*-0.05);\n                    this.shoot = false;\n                    --this.ammo;\n                    this.scene.events.emit('ammoChange', this.ammo);\n                    if(this.ammo <= 0)\n                        this.SetWeapon(Items.SLINGSHOT, this.ammo);\n                    break;\n                    \n                default:\n            }\n            \n            \n        }\n        \n        // positioning\n        this.light.setPosition(pc.x, pc.y);\n        Phaser.Math.RotateTo(this.a1, pc.x, pc.y, this.angle-0.7854, this.radius);   // rotate arms\n        Phaser.Math.RotateTo(this.a2, pc.x, pc.y, this.angle+0.7854, this.radius);\n        Phaser.Math.RotateTo(this.weapon, pc.x, pc.y, this.angle, this.radius);      // rotate weapon\n        this.weapon.rotation = this.angle;                                           // weapon angle\n        this.weapon.setFlipY(!is_dir);                                               // not upside down.\n    }\n    \n    \n    keydown() {\n        let A = this.keys.A.isDown || this.keys.LEFT.isDown;\n        let D = this.keys.D.isDown || this.keys.RIGHT.isDown;\n        let W = this.keys.W.isDown || this.keys.UP.isDown;\n        let S = this.keys.S.isDown || this.keys.DOWN.isDown;\n        if(!this.scene.sys.game.device.os.desktop) {\n            A |= this.cursorKeys.left.isDown;\n            D |= this.cursorKeys.right.isDown;\n            W |= this.cursorKeys.up.isDown;\n            S |= this.cursorKeys.down.isDown;\n            if(this.pressedKeys[1] != A)\n                this.keyup({keyCode: 65});\n            if(this.pressedKeys[2] != D) // \n                this.keyup({keyCode: 68});\n            if(this.pressedKeys[3] != W)\n                this.keyup({keyCode: 87});\n            if(this.pressedKeys[4] != S)\n                this.keyup({keyCode: 83});\n                \n            this.pressedKeys[1] = A; \n            this.pressedKeys[2] = D; \n            this.pressedKeys[3] = W; \n            this.pressedKeys[4] = S; \n        }\n        \n        if(A && !D)\n            this.body.velocity.x -= this.body.maxVelocity.x;\n        else if(D && !A)\n            this.body.velocity.x += this.body.maxVelocity.x;\n        else if(A && D)\n            this.body.velocity.x = 0;\n        \n        if(W && !S)\n            this.body.velocity.y -= this.body.maxVelocity.y;\n        else if(S && !W)\n            this.body.velocity.y += this.body.maxVelocity.y;\n        else if(W && S)\n            this.body.velocity.y = 0;\n    }\n    \n    \n    keyup(e) {\n        switch(e.keyCode) {\n            case 65: case 37: // left\n                this.body.velocity.x = 0; break;\n            case 87: case 38: // up \n                this.body.velocity.y = 0; break;\n            case 68: case 39: // right\n                this.body.velocity.x = 0; break;\n            case 83: case 40: // down    \n                this.body.velocity.y = 0; break;\n        }\n    }\n    \n    \n    mousedown(e)    { this.shoot = true; }\n    mouseup(e)      { this.shoot = false; }\n\n\n    SetWeapon(weaponType, ammo) {\n        this.scene.sound.play('pickup_item');\n        if(weaponType == this.weapon.type) {\n            this.ammo += ammo;\n            score_fade(this.x+50, this.y-50, '+'+ammo);\n        } else {\n            this.weapon.destroy();\n            this.weapon = this.scene.add.item(this.x, this.y, weaponType);\n            this.ammo = ammo;\n            // if not alive, and picked up weapon somehow, match the alpha of respawn.\n            if(!this.alive()) this.weapon.alpha = this.alpha;\n        }\n        this.scene.events.emit('ammoChange', this.ammo);\n    }\n    \n    \n    static DoDamage(enemy, player) {\n        if(!player.alive()) return;\n        // burst player\n        player.particles.emitParticleAt(player.x, player.y);\n        // Player disapear & set status to dead. alpha != 1 == dead\n        player.alpha = 0;\n        player.a1.alpha = 0;\n        player.a2.alpha = 0;\n        player.a2.alpha = 0;\n        player.weapon.alpha = 0;\n        // Turn off machine gun if shooting\n        player.shoot = false;\n        // disable movement.\n        player.body.moves = false;\n        // disable input. keyboard & mouse event\n        player.scene.input.off('pointerdown', player.pointerdown, player);\n        // subtract lives\n        --player.lives;\n        // turn off light\n        player.light.setIntensity(0.01); // dont turn off completely. bug in phaser makes screen go black.\n        // update UI\n        BulletMan.scene.events.emit('livesChange', player.lives);\n        // check if gameover\n        if(player.lives <= 0) {\n            // fade out game music\n            const time_ms = 6000;\n            let gm = player.scene.sound.get('game_music');\n            player.scene.tweens.add({\n                targets:  gm,\n                volume:   0,\n                duration: time_ms,\n                onComplete: function() {\n                    gm.destroy();\n                }\n            });\n            // fade out camera\n            player.scene.cameras.main.fadeOut(time_ms);\n        } else {\n            // make player respawn, Blink in\n            player.scene.tweens.add({\n                targets: [ player, player.a1, player.a2, player.weapon ],\n                alpha: { start: 0, to: 1},\n                ease: 'Bounce.In',\n                delay: 3000,\n                onComplete: function () {\n                    // enable movement.   some of this is redundant same with above\n                    player.body.moves = true;\n                    player.light.setIntensity(1);\n                    player.scene.input.on('pointerdown', player.mousedown, player);\n                    // player.body.stop(); // clear any leftover velocity\n                }\n            });\n        }\n    }\n    \n\n    alive() { return this.alpha == 1; }\n\n\n}\n\n\nPhaser.GameObjects.GameObjectFactory.register('player', function (x, y, r) {\n\tconst pl1 = new Player(this.scene, x, y, r);\n    this.displayList.add(pl1);\n    this.updateList.add(pl1);\n    return pl1;\n});","import { GetRandomVec2, TossCoin } from './Math.js';\n\n\nexport const Enemies = Object.freeze({\n    GREEN:   \"virus_green\",\n    RED:     \"virus_red\",\n    BLUE:    \"virus_blue\"\n});\n\n\n\nexport class Enemy extends Phaser.GameObjects.Sprite {\n\n    hp;\n    type;\n    v = 70;\n    \n    \n    timer = 0;\n    \n    constructor(scene, x, y, texture) {\n        super(scene, x, y, texture);\n        scene.physics.world.enable(this);\n        this.body.setCircle(this.displayWidth/2); // this includes frills.\n        \n        \n        scene.add.existing(this);\n        this.setScale(0.25);\n        this.angle = 0;\n        this.setDepth(0.2);\n    }\n    \n    \n    setTarget(target)\n\t{\n\t\tthis.target = target;\n\t}\n    \n    updateRotation() {\n        \n        const c = this.getCenter();\n        const tc = this.target.getCenter();\n        const rotation = Phaser.Math.Angle.Between(c.x, c.y, tc.x, tc.y);\n        \n        if(this.target.alive()) {\n            this.setRotation(rotation);\n            //  game.physics.arcade.velocityFromRotation(rotation, 150, this.body.velocity);\n\t\t} else {\n\t\t    // make them go the opposite way\n\t\t    this.setRotation(Phaser.Math.Angle.Reverse(rotation));\n\t\t}\n    }\n    \n    \n    update(t, dt) {\n        switch(this.type) {\n            case Enemies.BLUE:\n            case Enemies.GREEN:\n                this.updateRotation();\n                this.scene.physics.velocityFromRotation(this.rotation, this.v, this.body.velocity);\n                break;\n            case Enemies.RED:\n                if(this.hp == 2) {\n                    this.updateRotation();\n                    this.scene.physics.velocityFromRotation(this.rotation, this.v, this.body.velocity);\n                } else {    // frenzy mode\n                    // near to stopping\n                    if(Math.floor(Math.abs(this.body.velocity.x))-5 < 0) {\n                            // \"turn off\" damage\n                            this.hp = 1e12;\n                            // // wait some time\n                            if(this.timer < 834) { \n                                // wait on camera bound. if playe dead, wait for respawn.\n                                if (this.target.alive()){\n                                    this.timer += dt;\n                                }\n                                this.body.acceleration.x = 0;\n                                this.body.acceleration.y = 0;\n                                this.body.velocity.x = 0;\n                                this.body.velocity.y = 0;\n                                // always face towards player location even if player dead.\n                                const c = this.getCenter();\n                                const ct = this.target.getCenter();\n                                const rotation = Phaser.Math.Angle.Between(c.x,c.y,ct.x,ct.y);\n                                this.setRotation(rotation);\n                            } else { \n                                // reset timer.\n                                this.timer = 0;\n                                // turn on damage\n                                this.hp = 1;\n                                // charge\n                                this.scene.physics.velocityFromRotation(this.rotation, this.v, this.body.velocity);\n                            }\n                    } else {\n                        // or if collides world\n                        // if(Phaser.Geom.Intersects.RectangleToRectangle(this.body.getBounds(), this.scene.cameras.main.getBounds()))\n                            \n                            const x = ((Math.sign(Math.cos(this.rotation)) > 0) ? this.body.width : 0);\n                            const y = ((Math.sign(Math.sin(this.rotation)) > 0) ? this.body.height : 0);\n                            \n                            const x1 = ((Math.sign(Math.cos(this.rotation)) < 0) ? this.body.width : 0); \n                            const y1 = ((Math.sign(Math.sin(this.rotation)) < 0) ? this.body.height : 0);\n                            \n                            if(this.scene.cameras.main.worldView.contains(this.body.x + x1, this.body.y + y1)) {          // contain to camera.\n                                if(!this.scene.cameras.main.worldView.contains(this.body.x + x, this.body.y + y)) {\n                                    this.body.setVelocity(0);\n                                }\n                            }\n                            \n                    }\n                   \n                }\n                break;\n        }\n        \n        \n    }\n    \n    \n    \n    static SpawnLoc(scene) {\n    \tlet num = 400;\n    \tlet bound_x = scene.physics.world.bounds.width;\n    \tlet bound_y = scene.physics.world.bounds.height;\n    \tlet r = {};\n\n        if(!TossCoin(0.5)) {\n\t\t\t if(!TossCoin(0.5)) {\n\t\t\t\tr = GetRandomVec2(bound_x, bound_x, 0.0, bound_y);\n\t\t\t\tr.x += num;\n\t\t\t } else {\n\t\t\t     r = GetRandomVec2(0.0, 0.0, 0.0, bound_y);\n\t\t\t     r.x += -num;\n\t\t\t }\n        } else {\n\t\t    if(!TossCoin(0.5)) {\n\t\t\t    r = GetRandomVec2(0.0, bound_x, bound_y, bound_y);\n\t\t\t    r.y += num;\n\t\t    } else {\n\t\t\t\tr = GetRandomVec2(0.0, bound_x, 0.0, 0.0);\n\t\t\t\tr.y += -num;\n\t\t    }\n    \t}\n    \treturn r;\n    }\n    \n    \n}\n\n\nPhaser.GameObjects.GameObjectFactory.register('enemy', function (x, y, texture) {\n\tconst cc = new Enemy(this.scene, x, y, texture);\n    this.displayList.add(cc);\n    this.updateList.add(cc);\n    return cc;\n});","import { Player } from './Player.js';\nimport { Enemy, Enemies } from \"./Enemies.js\";\nimport { TossCoin } from './Math.js';\nimport { ItemMan, Item } from './Items.js';\n\n\n\nexport class EntityMan {\n    \n    static player;\n    static enemies;\n    static scene;\n    \n    static nextScoreEvent;\n    static prevEnemyCount;\n    static timer;\n    static score2win = 95000;\n    \n    static Init(scene) {\n        EntityMan.scene = scene;\n        EntityMan.player = scene.add.player(scene.physics.world.bounds.centerX, scene.physics.world.bounds.centerY, 40).setOrigin(0.5, 0.5);\n        EntityMan.enemies = scene.add.group({\n\t\t\tclassType: Enemy,\n\t\t\trunChildUpdate: true,\n\t\t\tremoveCallback: function(enemy) {\n\t\t\t    if(TossCoin(0.5)) ItemMan.addItem(Item.RandomItem(), enemy.getCenter());\n\t\t\t}\n\t\t});\n\t\tEntityMan.items = scene.add.group({\n            classType: Item,\n            runChildUpdate: true\n        });\n        \n\t\tfor(let i = 0; i < 5; ++i)\n\t\t    EntityMan.SpawnEnemy(Enemies.GREEN);\n\t\tEntityMan.SpawnEnemy(Enemies.RED);\n        EntityMan.SpawnEnemy(Enemies.BLUE);\n        EntityMan.SpawnEnemy(Enemies.BLUE);\n        // dont need to refresh\n        //-------------------------------------------------------------\n        \n        scene.physics.add.overlap(EntityMan.enemies, EntityMan.player, Player.DoDamage);\n        \n        //-----------------------------------------------------\n        EntityMan.nextScoreEvent = 1000;\n        EntityMan.prevEnemyCount = EntityMan.enemies.countActive();\n        EntityMan.timer = 0;\n        \n        \n    }\n    \n    \n    \n    static Update(time, dt) {\n        EntityMan.player.update(time, dt);\n        EntityMan.timer += dt;\n        while(EntityMan.timer > 10000) {    // spawn enemy every 10 seconds.\n            EntityMan.SpawnEnemy(Enemies.GREEN);\n            this.timer -= 10000;\n        }\n        \n        // if score or enemies equals the required enemy count move to next event\n        if(EntityMan.player.score > EntityMan.nextScoreEvent || EntityMan.enemies.countActive() >= 3*EntityMan.prevEnemyCount) { \n            EntityMan.scene.events.emit('nextEvent');\n            switch(EntityMan.nextEvent) {\n                case 1000:  \n                    for(let i = 0; i < 5; ++i)\n                        EntityMan.SpawnEnemy(Enemies.GREEN);\n                    break;\n                case 2000:\n                case 4000:\n                    for(let i = 0; i < 3; ++i)\n                        EntityMan.SpawnEnemy(Enemies.GREEN);\n                    EntityMan.SpawnEnemy(Enemies.BLUE);\n                    break;\n                case 8000:  \n                    EntityMan.SpawnEnemy(Enemies.BLUE);\n                    EntityMan.SpawnEnemy(Enemies.BLUE);\n                    EntityMan.SpawnEnemy(Enemies.RED);\n                    break;\n                case 16000:  \n                    for(let i = 0; i < 5; ++i) {\n                        EntityMan.SpawnEnemy(Enemies.GREEN);\n                        EntityMan.SpawnEnemy(Enemies.BLUE);\n                        EntityMan.SpawnEnemy(Enemies.RED);\n                    }\n                    break;\n                default:\n                    for(let i = 0; i < 5; ++i) {\n                        EntityMan.SpawnEnemy(Enemies.GREEN);\n                        EntityMan.SpawnEnemy(Enemies.BLUE);\n                    }\n                    EntityMan.SpawnEnemy(Enemies.RED);\n                    EntityMan.SpawnEnemy(Enemies.RED);\n                    break;\n            }\n            EntityMan.nextScoreEvent *= 2;\n            EntityMan.prevEnemyCount = EntityMan.enemies.countActive();\n        }\n        \n        if(EntityMan.player.score >= EntityMan.score2win) {\n            // start game win event\n            EntityMan.scene.events.emit('gamewin');\n            // no more spawns allows\n            EntityMan.timer = 0;\n            // \"you win\" swoops in.\n            // not implemented\n        }\n        \n    }\n    \n    \n    static SpawnEnemy(type) {\n        let spawnloc = Enemy.SpawnLoc(EntityMan.scene); // maybe just pass scene in\n        let e;\n        switch(type) {\n            case Enemies.GREEN:\n        \t    e = EntityMan.enemies.get(spawnloc.x, spawnloc.y, type);        // in here as there could be enemy specific spawning later.\n        \t    break;\n            case Enemies.RED:\n                e = EntityMan.enemies.get(spawnloc.x, spawnloc.y, type);\n        \t    e.hp = 2;\n        \t    break;\n        \tcase Enemies.BLUE:\n                e = EntityMan.enemies.get(spawnloc.x, spawnloc.y, type);\n        \t    e.hp = 3;\n        \t    break;\n        }\n        e.type = type;\n        e.setTarget(this.player); // maybe move to create callback\n\t    e.setPipeline('Light2D');\n    }\n\n\n}\n","import { EntityMan } from \"./EntityMan.js\";\nimport { Enemies } from \"./Enemies.js\";\n\n\nexport const Bullets = {\n    CHAIN : 'chainAmmo',\n    SLINGSHOT : 'slingAmmo',\n    SHOTGUN : 'shotgunAmmo'\n};\n\nexport class BulletMan { \n    \n    static bullets;  \n    static scene;\n      \n    static Init(scene) {\n        BulletMan.bullets = scene.add.group({\n            classType: Bullet,\n            runChildUpdate: true\n        });\n        scene.physics.add.overlap(BulletMan.bullets, EntityMan.enemies, doDamage); \n        BulletMan.scene = scene;\n    }\n    \n    \n    static Update(t, dt) {}\n    \n    \n    static addBullet(type, loc, angle) {\n        let b = BulletMan.bullets.get(loc.x, loc.y, type);\n        const dir = { x: Math.cos(angle), y: Math.sin(angle) };\n        b.dir = dir;        // trajectory\n        b.rotation = angle; // sprite direction\n        // b.setPipeline('Light2D'); // makes bullets too dark\n        switch(type) {  // might be different for a diff bullet.\n            case Bullets.SHOTGUN:\n            case Bullets.SLINGSHOT:\n            case Bullets.CHAIN:\n                b.setScale(0.2);\n                break;\n        }\n    }\n      \n}\n\n\nexport function score_fade(x, y, score) {\n    let scoreText = EntityMan.scene.add.text(x, y, score).setFontSize(30).setFontFamily(\"Courier New\").setOrigin(0.5);\n    BulletMan.scene.tweens.add({\n        targets: scoreText,\n        alpha: 0,\n        duration: 300,\n        ease: 'Power2',\n        onComplete:function(){\n            scoreText.destroy();  \n        }\n    });\n}\n\n\nfunction doDamage(Bullet, Enemy) {\n    \n    \n    \n    switch(Enemy.type) {\n        case Enemies.GREEN:\n            Enemy.scene.sound.play('death1');\n            Bullet.destroy();       // might be better to just disable and hide\n            Enemy.destroy();        // kill&hide\n            EntityMan.SpawnEnemy(Enemy.type);\n            EntityMan.player.score += 100;\n            EntityMan.scene.events.emit('scoreChange', EntityMan.player.score);\n            score_fade(Enemy.x, Enemy.y, '100');\n            break;\n        case Enemies.RED:\n            --Enemy.hp;\n            Bullet.destroy(); \n            if(Enemy.hp <= 0) {\n                Enemy.scene.sound.play('death2');\n                Enemy.destroy();     \n                EntityMan.SpawnEnemy(Enemy.type);\n                EntityMan.player.score += 500;\n                EntityMan.scene.events.emit('scoreChange', EntityMan.player.score);\n                score_fade(Enemy.x, Enemy.y, '500');\n            } else {\n                Enemy.v = 1000;\n                Enemy.body.velocity.x = 0;\n            }\n            break;\n        case Enemies.BLUE:\n            --Enemy.hp;\n            Bullet.destroy();\n            if(Enemy.hp <= 0) {\n                Enemy.scene.sound.play('death1');\n                Enemy.destroy();      \n                EntityMan.SpawnEnemy(Enemy.type);\n                EntityMan.player.score += 300;\n                EntityMan.scene.events.emit('scoreChange', EntityMan.player.score);\n                score_fade(Enemy.x, Enemy.y, '300');\n            } else {\n                BulletMan.scene.tweens.add({\n                  targets     : Enemy ,\n                  scale       : Enemy.scaleX*1.5,\n                  ease        : 'Linear',\n                  duration    : 500,\n                });\n            }\n            break;\n            \n    }\n}\n\n\nclass Bullet extends Phaser.GameObjects.Sprite {\n    \n    #size1;\n    #type;\n    dir;\n    \n    constructor(scene, x, y, texture) {\n        super(scene, x, y, texture);\n        scene.physics.world.enable(this);\n        this.body.setCollideWorldBounds(false);\n        \n        scene.add.existing(this);\n        this.setDepth(0.2);\n    }\n    \n    \n    update(t, dt) {\n        const speed = 700;\n        this.body.velocity.x = this.dir.x * speed;\n        this.body.velocity.y = this.dir.y * speed;\n        if(this.body.checkWorldBounds()) {\n            this.destroy(); \n        }\n    }\n    \n    \n}\n","\nexport class ImageButton extends Phaser.GameObjects.Image {\n    \n    constructor(scene, x, y, texture, callback) {\n        super(scene, x, y, texture);\n        \n        this.setInteractive({ useHandCursor: true })\n            .on('pointerover', () => this.enterButtonHoverState() )\n            .on('pointerout', () => this.enterButtonRestState() )\n            .on('pointerdown', () => this.enterButtonActiveState() )\n            .on('pointerup', () => {\n                this.setInteractive({ useHandCursor: false }); \n                this.enterButtonHoverState();\n                callback();\n        });\n        scene.add.existing(this);\n    }\n    \n    preUpdate(time, delta) {}\n    update(t, dt) {}\n    \n    \n    enterButtonHoverState() {\n        // add a border or make lighter. 2nd image that appears on hover.\n        this.setTint(0x1287CD);\n    }\n    \n    enterButtonRestState() {\n        this.clearTint();\n    }\n    \n    enterButtonActiveState() {\n        this.setTint(0x808080);\n    }\n}\n\n\n\nPhaser.GameObjects.GameObjectFactory.register('ImgButton', function (x, y, texture, cb) {\n\tconst cc = new ImageButton(this.scene, x, y, texture, cb);\n    this.displayList.add(cc);\n    this.updateList.add(cc);\n    return cc;\n});\n\n\n\nexport class UserInterface extends Phaser.Scene {\n\n    ammoText;\n    scoreText;\n    livesText;\n    \n    constructor(config) {\n        super({ key: 'ui'});\n    }\n    \n    preload() {}\n    \n    create(data)\n    {\n        this.scoreText = this.add.text(10, 50, 'Score: 0' , {fontFamily: 'Courier New', fontSize: 20, fill: '#0f0' });\n        this.gameText = this.add.text(10, 20, 'Game Progress: 0%', {fontFamily: 'Courier New', fontSize: 20, fill: '#0f0' });\n        this.ammoText = this.add.text(10, 80, 'Ammo: Unlimited', {fontFamily: 'Courier New', fontSize: 20, fill: '#0f0' });\n        this.livesText = this.add.text(10, 110, 'Lives: 4', {fontFamily: 'Courier New', fontSize: 20, fill: '#0f0' });\n        \n        // on destruction this\n        var ourGame = this.scene.get('game');\n\n        ourGame.events.on('scoreChange', function (value) {\n            this.scoreText.setText('Score: ' + value);\n            this.gameText.setText('Game Progress: ' + ((value/95000)*100).toFixed(2) + '%');\n        }, this);\n        \n        ourGame.events.on('ammoChange', function (value) {\n            if(value <= 0) value = 'Unlimited';\n            this.ammoText.setText('Ammo: ' + value);\n        }, this);\n        \n        ourGame.events.on('livesChange', function (value) {\n            this.livesText.setText('Lives: ' + value);\n            if(value <= 0) {\n                this.scene.sendToBack('ui');\n                this.scene.restart();\n                this.scene.sleep('ui');\n            }\n        }, this);\n        \n    }\n\n}\n\nexport class TitleScreen extends Phaser.Scene {\n\n    constructor(config) {\n        super(config);\n    }\n\n    preload() {\n        this.load.image({ key: 'TitleScreen', url: 'data/gfx/backgroundLab.jpg' });\n        this.load.image({ key: 'Logo', url: 'data/gfx/logo23.png' });\n        this.load.image({ key: 'PlayButton', url: 'data/gfx/PlayButton.svg' });\n        this.load.image({ key: 'CreditsButton', url: 'data/gfx/CreditsButton.svg' });\n        this.load.image({ key: 'MoveKeys', url: 'data/gfx/WASDkeysHelp.svg' });\n    }\n\n\n    create(data) {\n        let w = this.sys.canvas.width;\n        let h = this.sys.canvas.height;\n        \n        this.ts = this.add.image(0, 0, 'TitleScreen').setOrigin(0, 0).setDisplaySize(w, h);\n        this.logo = this.add.image(w/2, h/6, 'Logo').setOrigin(0.5, 0.5);\n        this.logo.setScale(Math.min(w / this.logo.displayWidth, h / this.logo.displayHeight)/1.5);\n        if(this.sys.game.device.os.desktop)\n            this.help = this.add.image(w, 0, 'MoveKeys').setOrigin(1, 0);\n        this.pb = this.add.ImgButton(w/2, h/2, 'PlayButton', () => this.play()).setOrigin(0.5, 0.5);\n        this.cb = this.add.ImgButton(w/2, h/2+this.pb.displayHeight*1.5, 'CreditsButton', () => this.scene.switch('credits')).setOrigin(0.5, 0.5);\n   \n    }\n        \n  \n\n    \n    play() {\n        this.scene.switch('game');\n    }\n    \n}\n\nexport class Credits extends Phaser.Scene {\n\n    constructor(config) {\n        super('credits');\n    }\n\n    preload() {\n        this.load.image({ key: 'CreditsBG', url: 'data/gfx/CreditsScreen.png' });\n        this.load.image({ key: 'mainmenubtn', url: 'data/gfx/MainMenuButton.svg' });\n    }\n\n\n    create() {\n        let w = this.sys.canvas.width;\n        let h = this.sys.canvas.height;\n\n        this.cs = this.add.image(0, 0, 'CreditsBG').setOrigin(0, 0).setDisplaySize(w, h);\n        this.mb = this.add.ImgButton(w/2, h/2.5, 'mainmenubtn', () => this.scene.switch('default')).setOrigin(0.55, 0.55);\n        this.mb.setScale(Math.min(w / this.mb.displayWidth, h / this.mb.displayHeight)/4);\n   \n    }\n}","import { BulletMan } from \"./BulletMan.js\";\nimport { EntityMan } from \"./EntityMan.js\";\nimport { Enemies } from \"./Enemies.js\";\nimport { ItemMan } from \"./Items.js\";\nimport { UserInterface, TitleScreen, Credits } from \"./TitleScreen.js\";\n\nconst SCALE = 1.6;\nconst WIDTH = 1280*SCALE;\nconst HEIGHT = 720*SCALE;\n\nlet clientWidth = document.documentElement.clientWidth;\nlet clientHeight = document.documentElement.clientHeight;\n\n\n\nclass Game extends Phaser.Scene {\n\n    static cameras;\n    music;\n\n\n    constructor() {\n        super({ key: 'game'});\n    }\n\n    init() {}\n\n    loading_screen() {\n        // Source:  https://gamedevacademy.org/creating-a-preloading-screen-in-phaser-3/\n        var progressBar = this.add.graphics();\n        var progressBox = this.add.graphics();\n        var width = this.cameras.main.width;\n        var height = this.cameras.main.height;\n        progressBox.fillStyle(0x222222, 0.8);\n        progressBox.fillRect(width/2-160, height/2-25, 320, 50);\n        \n       \n        var loadingText = this.make.text({\n            x: width / 2,\n            y: height / 2 - 50,\n            text: 'Loading...',\n            style: {\n                font: '20px monospace',\n                fill: '#ffffff'\n            }\n        });\n        loadingText.setOrigin(0.5, 0.5);\n        \n        var percentText = this.make.text({\n            x: width / 2,\n            y: height / 2,\n            text: '0%',\n            style: {\n                font: '18px monospace',\n                fill: '#ffffff'\n            }\n        });\n        percentText.setOrigin(0.5, 0.5);\n        \n        var assetText = this.make.text({\n            x: width / 2,\n            y: height / 2 + 50,\n            text: '',\n            style: {\n                font: '18px monospace',\n                fill: '#ffffff'\n            }\n        });\n        assetText.setOrigin(0.5, 0.5);\n        \n        this.load.on('progress', function (value) {\n            percentText.setText(parseInt(value * 100) + '%');\n            progressBar.clear();\n            progressBar.fillStyle(0xffffff, 1);\n            let w = 300 * value;\n            progressBar.fillRect(width/2-150, height/2-15, w, 30);\n        });\n        \n        this.load.on('fileprogress', function (file) {\n            assetText.setText('Loading asset: ' + file.key);\n        });\n        this.load.on('complete', function () {\n            progressBar.destroy();\n            progressBox.destroy();\n            loadingText.destroy();\n            percentText.destroy();\n            assetText.destroy();\n        }, this);\n    }\n\n    preload() {\n        this.input.setDefaultCursor('crosshair');\n        this.loading_screen();\n        \n        this.load.image({\n            key: 'playerfrag',\n            url: 'data/gfx/playerFrag.svg'\n        });\n        \n        this.load.image({\n            key: 'chain',\n            url: 'data/gfx/chaingun.png'\n        });\n        this.load.image({\n            key: 'chainicon',\n            url: 'data/gfx/chaingunIcon.svg'\n        });\n        this.load.image({\n            key: 'chainAmmo',\n            url: 'data/gfx/chainAmmo.png'\n        });\n\n        this.load.image({\n            key: 'shotgun',\n            url: 'data/gfx/shotgun.svg'\n        });\n        this.load.image({\n            key: 'shotgunicon',\n            url: 'data/gfx/shotgunIcon.svg'\n        });\n        this.load.image({\n            key: 'shotgunAmmo',\n            url: 'data/gfx/shotgunAmmo.svg'\n        });\n        this.load.image({\n            key: 'slingshot',\n            url: 'data/gfx/slingshot.svg'\n        });\n        this.load.image({\n            key: 'slingshoticon',\n            url: 'data/gfx/slingshotIcon.svg'\n        });\n        this.load.image({\n            key: 'slingAmmo',\n            url: 'data/gfx/slingshotAmmo.svg'\n        });\n        this.load.image({\n            key: 'background',\n            url: 'data/gfx/Background.svg',\n            normalMap: 'data/gfx/NormalThread4.svg'\n        });\n        //-----------------------------------\n        this.load.audio('game_music', 'data/sfx/music.wav');\n        this.load.audio('shoot_pop', 'data/sfx/cork_edit.mp3');\n        this.load.audio('shoot_twang', 'data/sfx/shoot.mp3');\n        this.load.audio('shoot_bang', 'data/sfx/thwack-01.wav');\n        this.load.audio('pickup_item', 'data/sfx/pickup.wav');\n        this.load.audio('death1', 'data/sfx/blub_hurt1.wav');\n        this.load.audio('death2', 'data/sfx/blub_hurt2.wav');\n        //-----------------------------------\n        this.load.text('CovidRed', 'data/fx/CovidRed.frag');\n        this.load.text('CovidGreen', 'data/fx/CovidGreen.frag');\n        this.load.text('CovidBlue', 'data/fx/CovidBlue.frag');\n        this.load.text('CovidVert', 'data/fx/Covid.vert');\n        //--------------------------------------\n        if(!this.sys.game.device.os.desktop)\n            this.load.plugin('rexvirtualjoystickplugin', 'site/rexvirtualjoystickplugin.min.js', true);\n    }\n\n\n    create(data) {\n        // change shader to spritesheet. \n        this.add.shader(\n            new Phaser.Display.BaseShader('---', this.cache.text.get('CovidGreen'), this.cache.text.get('CovidVert')), \n            0, 0, 300, 300, []\n        ).setRenderToTexture('virus_green');\n        this.add.shader(\n            new Phaser.Display.BaseShader('----', this.cache.text.get('CovidRed'), this.cache.text.get('CovidVert')),\n            0, 0, 500, 500, []\n        ).setRenderToTexture('virus_red');\n        this.add.shader(\n            new Phaser.Display.BaseShader('------', this.cache.text.get('CovidBlue'), this.cache.text.get('CovidVert')),\n            0, 0, 200, 200, []\n        ).setRenderToTexture('virus_blue');\n        \n        this.physics.world.setBounds(0, 0, WIDTH*2, HEIGHT*2);\n        this.cameras.main.setBounds(0, 0, WIDTH*2, HEIGHT*2);\n\n        this.add.image(0, 0, 'background')\n            .setPipeline('Light2D')\n            .setOrigin(0, 0)\n            .setDisplaySize(WIDTH*2, HEIGHT*2);\n            \n        this.lights.enable().setAmbientColor(0x555555);\n        var heart_light = this.lights.addLight(1689, 1015, 100, 0xFF3333);\n        this.hlt = this.tweens.add({\n            targets: heart_light,\n            radius: 500,\n            duration: 1000,\n            ease: 'Sine.InOut',\n            repeat: -1, \n            yoyo: true\n        });\n        // update light speed update music\n        this.events.on('nextEvent', function (value) {  // make nextEvent happen with time instead.\n                this.hlt.timeScale *= 1.5;\n                this.music.rate += 0.07;\n        }, this);\n        \n        EntityMan.Init(this);\n        ItemMan.Init(this);\n        BulletMan.Init(this);\n        \n        this.music = this.sound.add('game_music', {loop: true, volume: 0.2, rate: 0.5});\n        this.music.play();\n\n        this.input.setDefaultCursor('crosshair');\n        this.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE, (cam, effect) => {\n            this.time.delayedCall(1000, () => {\n    \t\t\tthis.scene.start('gameover', { fadeIn: true, score: EntityMan.player.score, win: false });\n    \t\t}, this);\n        }, this);\n        \n        this.events.once('gamewin', ()=>{\n             // kill all enemies.\n            EntityMan.enemies.children.each(child => {\n                switch(child.type) {\n                    case Enemies.BLUE:\n                    case Enemies.GREEN:\n                        EntityMan.scene.sound.play('death1');\n                        break;\n                    case Enemies.RED:\n                        EntityMan.scene.sound.play('death2');\n                        break;\n                }\n                child.destroy();\n            });\n            // explode them w/confetti.\n            // not implemented\n            // hide ui\n            this.events.emit('livesChange', 0);\n            // launch gameover\n            const time_ms = 2000;\n            this.tweens.add({\n                targets:  this.music,\n                volume:   0,\n                duration: time_ms,\n                onComplete: ()=>{\n                    this.scene.launch('gameover', { fadeIn: true, score: EntityMan.player.score, lives: EntityMan.player.lives, win: true });\n                    this.scene.bringToTop('gameover');\n                }\n            });\n        }, this);\n        this.scene.launch('ui');\n    }\n\n\n    update(time, delta) {\n        this.cameras.main.startFollow(EntityMan.player);\n        let pointer = this.input.mousePointer;\n        const wp = this.cameras.main.getWorldPoint(pointer.x, pointer.y);\n        pointer.worldX = wp.x;\n        pointer.worldY = wp.y;\n        EntityMan.Update(time, delta);\n        BulletMan.Update(time, delta);\n    }\n}\n\n\n\n\nclass GameOver extends Phaser.Scene {\n\n    \n    constructor() {\n        super({key: 'gameover'});\n    }\n\n    preload() {\n        this.load.image({ key: 'gameoverTxt', url: 'data/gfx/gameover.png' });\n        this.load.image({ key: 'playagainbtn', url: 'data/gfx/PlayAgainButton.svg' });\n        this.load.image({ key: 'mainmenubtn', url: 'data/gfx/MainMenuButton.svg' });\n        this.load.image({ key: 'victory', url: 'data/gfx/victory4.png' });\n        this.load.audio('fanfare', 'data/sfx/tempWinSong.mp3');\n    }\n\n\n    create(data) {\n        let w = this.sys.canvas.width;\n        let h = this.sys.canvas.height;\n        let logo_id = (data.win) ?  'victory' : 'gameoverTxt'; \n        this.logo = this.add.image(w/2, h/6, logo_id).setOrigin(0.5, 0.5).setScale(0.8);\n        this.mm = this.add.ImgButton(w/2, h/1.8, 'mainmenubtn', () => this.mainMenu(data.win)).setOrigin(0.5, 0.5);\n        this.rs = this.add.ImgButton(w/2, h/1.5, 'playagainbtn', () => this.playAgain(data.win)).setOrigin(0.5, 0.5);\n        if(data.win) {\n            this.scoreTxt = this.add.text(w/2, h/3, 'Final Score: ' + data.score + \" x \" + data.lives + \" lives\" + \" = \" + data.score*data.lives, { fill: '#0f0' }).setFontSize(60).setOrigin(0.5, 0.5);\n            this.music = this.sound.add('fanfare', {loop: true });\n            this.music.play();\n        } else {\n            this.scoreTxt = this.add.text(w/2, h/3, 'Final Score: ' + data.score, { fill: '#0f0' }).setFontSize(60).setOrigin(0.5, 0.5);\n            // No music when you lose.\n        }\n    }\n    \n    \n    playAgain(win) {\n        if(win)\n            this.music.stop();\n        // gotta do this. else states are left-over from different systems. if you managed different systems music, lights globally maybe it would fix.\n        // bad way to do this, but easiest for now.\n        this.scene.remove('game');\n        this.scene.add('game', Game, false);\n        this.scene.remove('ui');\n        this.scene.add('ui', UserInterface, false);\n    \tthis.scene.start('game', { fadeIn: true });\n    }\n    \n    \n    mainMenu(win) {\n        if(win)\n            this.music.stop();\n        this.scene.remove('game');\n        this.scene.add('game', Game, false);\n        this.scene.remove('ui');\n        this.scene.add('ui', UserInterface, false);\n        this.scene.start('default', { fadeIn: true });\n    }\n}\n\n\n\n\n\n\nconst myCustomCanvas = document.createElement('canvas');\ndocument.body.appendChild(myCustomCanvas);\nconst myCustomContext = myCustomCanvas.getContext('webgl');\nmyCustomContext.getExtension('OES_standard_derivatives');\nconst gameConfig = {\n    type: Phaser.WEBGL,\n    canvas: myCustomCanvas,\n    context: myCustomContext,\n    maxLights: 11,\n    width: clientWidth,\n    height: clientHeight,\n    roundPixels: true,\n    mode: Phaser.Scale.FIT,\n    physics: {\n        default: 'arcade',\n        arcade: {\n            gravity: { y: 0 },\n            debug: true,            // lights only work in debug mode?\n            debugShowBody: false,   // Keep this off. I moved velocity debug to body also. Velocity now draws 1 pixel that somehow fixes broken lights\n            debugShowVelocity: true // and keep this ON.\n        }\n    },\n\n    scene: [TitleScreen, Credits, Game, UserInterface, GameOver]\n };\nvar game = new Phaser.Game(gameConfig);\n\nfunction isMobile() {\n  try{ document.createEvent(\"TouchEvent\"); return true; }\n  catch(e){ return false; }\n}\nwindow.addEventListener(\"resize\", resize, false);\nfunction resize() {\n    // https://stackoverflow.com/questions/49716741/how-do-i-scale-the-scene-to-fullscreen\n    var canvas = document.querySelector(\"canvas\");\n    var windowWidth = window.innerWidth;\n    var windowHeight = window.innerHeight;\n    var windowRatio = windowWidth / windowHeight;\n    var gameRatio = game.config.width / game.config.height;\n    if (windowRatio < gameRatio) {\n        canvas.style.width = windowWidth + \"px\";\n        canvas.style.height = (windowWidth / gameRatio) + \"px\";\n    } else {\n        canvas.style.width = (windowHeight * gameRatio) + \"px\";\n        canvas.style.height = windowHeight + \"px\";\n    }\n}\n\nwindow.addEventListener(\"orientationchange\", function() {\n    alert(\"Refresh Page!\");\n}, false);","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}